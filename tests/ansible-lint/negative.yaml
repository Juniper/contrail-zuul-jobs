---

# TODO - autodiscovering new directories containing tests and
# dynamicaly including reusable playbook for each discovered dir
#- name: test the ansible-lint rules for fails
#  hosts: all
#  pre_tasks:
#    - name: Getting list of availabile rules
#      find:
#        path: ./fixtures
#        file_type: directory
#        use_regex: yes
#        patterns: "^ANSIBLE-J[0-9][0-9][0-9][0-9]$"
#        recurse: no
#      register: supported_rules
 
#  tasks:
#  - debug: msg='{{ supported_rules }}'

#  - include_tasks: reusable_negative.yaml
#    with_items:
#      - '{{ supported_rules }}'

#    rule_id='ANSIBLE-J0003'

# Not working with loop
#- import_playbook: reusable_negative.yaml
#  with_items:
#    - 'ANSIBLE-J0003'
#    - 'ANSIBLE-J0007'
#    - '{{ supported_rules }}'

# with_items isn't valid for playbook includes, just for task includes.
- include: reusable_negative.yaml
    rule_id='ANSIBLE-J0003'
- include: reusable_negative.yaml
    rule_id='ANSIBLE-J0007'

