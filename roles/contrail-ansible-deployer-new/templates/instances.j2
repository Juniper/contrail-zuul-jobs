instances:
  bms1:
    provider: bms
    ip: "{{ ansible_all_ipv4_addresses[0] }}"
    roles:
      config_database:
      config:
      control:
      analytics_database:
      analytics:
      webui:
      vrouter:
      openstack:
contrail_configuration:
  CLOUD_ORCHESTRATOR: "{{ cloud_orchestrator }}"
  CONTAINER_REGISTRY: "{{ docker_registry.fqdn }}:{{ registry_port }}"
  CONTRAIL_VERSION: "{{ contrail_version }}"
  CONTROLLER_NODES: "{{ ansible_all_ipv4_addresses[0] }}"
  LINUX_DISTR: centos7
  LOG_LEVEL: SYS_DEBUG
  OPENSTACK_VERSION: "{{ openstack_version }}"
  PHYSICAL_INTERFACE: eth1
  VROUTER_GATEWAY: 172.16.8.1
{% if cloud_orchestrator == 'openstack' %}
  AUTH_MODE: keystone
  KEYSTONE_AUTH_ADMIN_PASSWORD: c0ntrail123
  KEYSTONE_AUTH_HOST: "{{ ansible_all_ipv4_addresses[0] }}"
  KEYSTONE_AUTH_URL_VERSION: "/v3"
  RABBITMQ_PORT: 5673
{% endif %}
kolla_config:
  kolla_globals:
    network_interface: eth0
    api_interface: eth0
    neutron_external_interface: eth0
    kolla_external_vip_interface: eth0
    enable_haproxy: no
    openstack_service_workers: 1
    openstack_release: "{{ kolla_version }}"
    docker_registry: "{{ docker_registry.fqdn }}:{{ docker_registry.port }}"
    neutron_opencontrail_init_image_full: "{{ docker_registry.fqdn }}:{{ registry_port }}/contrail-openstack-neutron-init:{{ zuul.change }}-{{ zuul.patchset }}-centos7-ocata"
    nova_compute_opencontrail_init_image_full: "{{ docker_registry.fqdn }}:{{ registry_port }}/contrail-openstack-compute-init:{{ zuul.change }}-{{ zuul.patchset }}-centos7-ocata"


#kolla_base_distro: "{{ kolla_docker_distro }}"
#  kolla_install_type: 'binary'
#  keystone_admin_user: 'admin'
#  contrail_api_interface_address: "{{ hostvars[inventory_hostname]['ansible_host'] }}"
#  kolla_external_vip_address: "{{ hostvars[inventory_hostname]['ansible_host'] }}"
#  kolla_internal_vip_address: "{{ hostvars[inventory_hostname]['ansible_host'] }}"
#  neutron_plugin_agent: opencontrail
#  rabbitmq_user: openstack
#  contrail_docker_registry: "{{ docker_registry.fqdn }}:{{ docker_registry.port }}"
#  enable_nova_compute: 'yes'
#  enable_haproxy: 'no'
#  enable_ironic: 'no'
#  enable_ironic_notifications: 'no'
#  # override rabbitmq ports to prevent conflict with the contrail rabbit instance
#  rabbitmq_port: "5673"
#  rabbitmq_management_port: "15673"
#  rabbitmq_cluster_port: "25673"
#  rabbitmq_epmd_port: "4370"
#  ironic_notification_manager_image_full: "{{ docker_registry.fqdn }}:{{ registry_port }}/contrail-openstack-ironic-notification-manager:{{ zuul.change }}-{{ zuul.patchset }}-centos7-ocata"
