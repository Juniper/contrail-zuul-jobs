CONTAINER_REGISTRY: "{{ docker_registry.fqdn }}:{{ registry_port }}"
REGISTRY_PRIVATE_INSECURE: True

provider_config:
  bms:
    ntpserver: 192.168.1.1
    ssh_user: root
    ssh_private_key: /root/.ssh/id_rsa
    domainsuffix: novalocal

instances:
  bms1:
    provider: bms
    ip: "{{ control_ip }}"
    roles:
      config_database:
      config:
      control:
      analytics_database:
      analytics:
      webui:
      vrouter:
      openstack:
      openstack_compute:

contrail_configuration:
  CLOUD_ORCHESTRATOR: "{{ cloud_orchestrator }}"
  CONTAINER_REGISTRY: "{{ docker_registry.fqdn }}:{{ registry_port }}"
  CONTRAIL_VERSION: "{{ contrail_version }}"
  CONTROLLER_NODES: "{{ control_ip }}"
  LOG_LEVEL: SYS_DEBUG
  PHYSICAL_INTERFACE: eth1
  VROUTER_GATEWAY: 172.16.8.1
{% if cloud_orchestrator == 'openstack' %}
  AUTH_MODE: keystone
  AAA_MODE: rbac
  KEYSTONE_AUTH_ADMIN_PASSWORD: c0ntrail123
  KEYSTONE_AUTH_HOST: "{{ control_ip }}"
  KEYSTONE_AUTH_URL_VERSION: "/v3"
  RABBITMQ_NODE_PORT: 5673
{% endif %}

kolla_config:
  kolla_globals:
    network_interface: eth0
    api_interface: eth0
    neutron_external_interface: eth0
    kolla_external_vip_interface: eth0
    kolla_internal_vip_address: "{{ control_ip }}"
    contrail_api_interface_address: "{{ control_ip }}"
    enable_haproxy: no
    enable_ironic: 'no'
    enable_ironic_notifications: 'no'
    openstack_service_workers: 1
    openstack_release: "{{ kolla_version }}"
    docker_registry: "{{ docker_registry.fqdn }}:{{ docker_registry.port }}"
    neutron_opencontrail_init_image_full: "{{ docker_registry.fqdn }}:{{ registry_port }}/contrail-openstack-neutron-init:ocata-{{ zuul.change }}-{{ zuul.patchset }}"
    nova_compute_opencontrail_init_image_full: "{{ docker_registry.fqdn }}:{{ registry_port }}/contrail-openstack-compute-init:ocata-{{ zuul.change }}-{{ zuul.patchset }}"
  kolla_passwords:
    keystone_admin_password: c0ntrail123

orchestrator_configuration:
  internal_vip: "{{ control_ip }}"
{% if kolla_version is defined %}
  keystone:
    version: v3
    password: c0ntrail123
{% endif %}

test_configuration:
    image_web_server: 10.84.5.120
    use_project_scoped_token: True
