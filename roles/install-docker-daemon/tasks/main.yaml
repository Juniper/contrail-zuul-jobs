---

- name: load variables needed for docker daemon installation based on the OS type
  include_vars: '{{ item }}'
  with_first_found:
    - '{{ ansible_os_family | lower }}.yaml'
    - default.yaml

- include: 'pre/{{ ansible_os_family | lower }}.yaml'

- name: install docker daemon
  package:
    name: 'docker-ce{%if docker_version %}{{ docker_version }}{% endif %}'
    state: 'present'
  become: true

- name: ensure that docker daemon is running
  systemd:
    name: docker
    state: started
    enabled: yes
  become: true

- include: 'post/{{ ansible_os_family | lower }}.yaml'
